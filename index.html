<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Three js</title>
	<style>
		body{
			margin: 0px;
			padding: 0px;
		}
	</style>
</head>
<body>
	<div id="c"></div>
	<div>
		<button id="bez">Bezier!</button>
	</div>

	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="/rsrc/three.min.js"></script>
	<script type="text/javascript" src="/rsrc/util.js"></script>
	<script type="text/javascript" src="/rsrc/interpolate.js"></script>
	<script type="text/javascript" src="/rsrc/bezier.js"></script>
	<script type="text/javascript" src="/rsrc/draw.js"></script>

	<script>
		var bezier = null;
		$(document).ready(function(){
			// var renderer = new THREE.WebGLRenderer();
			// renderer.setSize(800, 600);
			// $("#c").append(renderer);
			// env.init(renderer);

			env.init(500, 500, $("#c"));

			var mouse = {
				click: {
					x: 0,
					y: 0,
				},
				setClick: function(event){
					// seta a posicao do click do mouse

					this.click.x = (event.pageX - (env.width/2));
					this.click.y = ((env.height/2) - event.pageY)
				}
			}

			// Detecta o click do mouse
			$("#c canvas").on('mousedown', function(event){
				mouse.setClick(event);	// atualiza a posicao do ultimo click
				env.addControlPoint(mouse.click.x, mouse.click.y);
			});

			
			$("#bez").click(function(){
				bezier = createBezier(env.points.clicked.set);

				env.addCurve('bezier', 0x00ff00);

				for (var i = 0; i < 1; i = i + 0.01) {
					env.addPointToCurve('bezier', bezier.get(i));
				};
			})
		});

		setInterval(function(){
			env.update();
		}, 100);
	</script>
</body>
</html>